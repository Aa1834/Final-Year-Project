<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width,initial-scale=1" />
        <title>Register</title>
        <style>
            :root{--bg:#f3f6fb;--card:#ffffff;--accent:#2563eb;--muted:#6b7280}
            html,body{height:100%;margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial}
            body{background:linear-gradient(180deg,#eef2ff 0%,var(--bg) 40%);display:grid;place-items:center;padding:24px}
            header{font-size:20px;font-weight:700;color:#0f172a;margin-bottom:12px;text-align:center}
            main{width:100%;max-width:420px}
            form{background:var(--card);padding:20px;border-radius:12px;box-shadow:0 6px 24px rgba(15,23,42,0.08);border:1px solid #e6eefb}
            label{display:block;font-size:13px;color:var(--muted);margin-bottom:6px}
            input[type=text],input[type=email],input[type=password]{width:100%;padding:10px 12px;border:1px solid #dbeafe;border-radius:8px;font-size:15px;background:#fff;color:#0f172a}
            input[type=text]:focus,input[type=email]:focus,input[type=password]:focus{outline:none;box-shadow:0 0 0 4px rgba(37,99,235,0.08);border-color:var(--accent)}
            fieldset{border:0;padding:0;margin:0}
            p{margin:0 0 14px 0}
            small.hint{display:block;font-size:12px;color:var(--muted);margin-top:6px}
            button{width:100%;padding:11px 14px;border-radius:10px;border:none;background:var(--accent);color:#fff;font-weight:700;cursor:pointer;font-size:15px}
            button:active{transform:translateY(1px)}
            footer{margin-top:12px;text-align:center;font-size:13px;color:var(--muted)}
        </style>
    </head>
    <body>
        <main>
            <header>Sign In</header>

            <form id="loginForm" novalidate>
                <fieldset>
                    <p>
                        <label for="loginEmail">Email address</label>
                        <input type="email" id="loginEmail" name="username" placeholder="you@example.com" required />
                    </p>
                                    <p>
                                        <label for="loginPassword">Password</label>
                                        <input type="password" id="loginPassword" name="password" placeholder="Enter password" required />
                                    </p>

                                    <p>
                                        <button id="logInButton" type="submit">Sign In</button>
                                    </p>
                </fieldset>
    
            </form>
        </main>
        <script type = "module">

            import {signInUser} from './users.js';


            document.querySelector('#loginForm').addEventListener('submit', async (e) => {
                e.preventDefault();
                const result = await signInUser(e);
                if (result.success){
                    const role = result.profile?.role;
                    console.log('Signed in. Role', role);
                    alert("Logging in! Welcome!");
                    window.location.href = "homePage.html"
                    return;
                }
                else{
                    alert("Invalid credentials. Re-check password and username again.")
                }


                /*if (result.code === 'missing-credentials'){
                    alert(result.message);
                }
                else if(result.code === 'auth/wrong-password'){
                    alert('Wrong password.');
                }
                else if (result.code === 'auth/user-not-found'){
                    alert('No account found.');
                }
                else{
                    alert('Sign-in failed: ' + (result.message || 'Unknown error'));
                } */
            });
        </script>
    </body>
</html>